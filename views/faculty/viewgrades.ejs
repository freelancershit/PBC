<% layout("layout") -%>
    <div class="col-sm-3" style=" padding: 10px; margin-top: 50px;" overflow-x: hidden;>
        <div class="col-lg-12">
            <% include ../partials/facultypanel %>
        </div>
    </div>
    <div class="col-sm-6">
        <div class="container">
            <div class="panel panel-info  col-sm-9" id="myScrollspy" style="padding: 0px; margin-top: 80px; height:460px;">

                <div class="panel-heading" style="color: #ffffff;">Encode Student Grades</div>


                <div class="container ">
                    <br>
                    <label for="usr " style="margin-left: 5px; ">Year: <strong><%= yrLvl %></strong></label>
                    <label for="usr " style="margin-left: 55px; ">Section: <strong><%= section %></strong></label>
                    <label for="usr " style="margin-left: 110px; ">Subject: <strong><%= subject %></strong></label>
                    <br>
                </div>


                <br>
                <div class="table-responsive">
                    <div style="overflow-y: scroll; height:350px; ">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <tr>
                                    <% if(yrLvl === "grade11" || yrLvl === "grade12"){ %>
                                        <th style="color: #ffffff; background-color: #020531;">Student </th>
                                        <th style="color: #ffffff; background-color: #020531;">First Semester</th>
                                        <th style="color: #ffffff; background-color: #020531;">Second Semester</th>
                                    <% }else{ %>
                                        <th style="color: #ffffff; background-color: #020531;">Student </th>
                                        <th style="color: #ffffff; background-color: #020531;">1st Grading</th>
                                        <th style="color: #ffffff; background-color: #020531;">2nd Grading</th>
                                        <th style="color: #ffffff; background-color: #020531;">3rd Grading</th>
                                        <th style="color: #ffffff; background-color: #020531;">4th Grading</th>
                                        <th style="color: #ffffff; background-color: #020531;">Final Grading</th>
                                        <th style="color: #ffffff; background-color: #020531;">Remark</th>
                                    <% } %>
                                        </tr>
                                </tr>
                            </thead>
                            <tbody>
                            
                            <%if(!(yrLvl === "grade11" || yrLvl === "grade12")){ %>
                            <% subjects.forEach(function(subject){ %>
                            <tr>
                                <input type="hidden" value="<%= subject._id %>" name="id[]" />
                                <td><%= subject.lastName %>, <%= subject.firstName %> <%= subject.middleName %></td>
                                <td>
                                
                                    <input disabled id="first" value="<%= subject.firstGrading %>" name="firstGrading[]" type="number" min="0" max="100" style="width:60px;" class="form-control">
                                    </td>
                                <td>
                                   <input disabled id="second" value="<%= subject.secondGrading %>" name="secondGrading[]" type="number" min="0" max="100" style="width:60px" class="form-control">
                                    </td>
                                <td>
                                    <input disabled id="third" value="<%= subject.thirdGrading %>" name="thirdGrading[]" type="number" min="0" max="100" style="width:60px" class="form-control">
                                    </td>
                                <td>
                                <input disabled id="fourth" value="<%= subject.fourthGrading %>" name="fourthGrading[]" type="number" min="0" max="100" style="width:60px" class="form-control">
                                    </td>
                                <td>
                                    <% if (subject.fourthGrading > 0) { %>
                                    <input disabled value="<%= (parseFloat(subject.firstGrading)  +  parseFloat(subject.secondGrading) +  parseFloat(subject.thirdGrading) + parseFloat(subject.fourthGrading)) / 4 %>" name="finalGrading[]" type="number" min="0" max="100" style="width:60px" class="form-control">
                                    <% } else { %>
                                        <input disabled value="" name="finalGrading[]" type="number" min="0" max="100" style="width:60px" class="form-control">
                                        <% } %>
                                    </td>
                                <td>
                                    <% if (((parseFloat(subject.firstGrading)  +  parseFloat(subject.secondGrading) +  parseFloat(subject.thirdGrading) + parseFloat(subject.fourthGrading)) / 4) > 75) { %>
                                    <input disabled id="remarks" value="Passed!" name="remarks[]" type="text" style="width:60px" class="form-control">
                                    <% } else if (((parseFloat(subject.firstGrading)  +  parseFloat(subject.secondGrading) +  parseFloat(subject.thirdGrading) + parseFloat(subject.fourthGrading)) / 4) < 75) { %>
                                        <input disabled id="remarks" value="Failed!" name="remarks[]" type="text" style="width:60px" class="form-control">
                                        <% } else { %>   
                                            <input disabled id="remarks" value="" name="remarks[]" type="text" style="width:60px" class="form-control">
                                            <% } %>
                                    </td>
                            </tr>
                            <% }); %>
                            <% }else{ %>
                            <% subjects.forEach(function(subject){ %>
                            <tr>
                            <input type="hidden" value="<%= subject._id %>" name="id[]" />                            
                            <td><%= subject.lastName %>, <%= subject.firstName %> <%= subject.middleName %></td>
                            <td>
                                
                                <input disabled id="firstSem" value="<%= subject.firstSem %>" name="firstSem[]" type="number" min="0" max="100" style="width:60px" class="form-control">
                                    </td>
                                <td>
                                <input disabled id="secondSem" value="<%= subject.secondSem %>" name="secondSem[]" type="number" min="0" max="100" style="width:60px" class="form-control">
                                </td>
                            </tr>
                            <% }); %>
                            <% } %>

                            
                        </table>

                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    </div>
  <script>
  </script>
